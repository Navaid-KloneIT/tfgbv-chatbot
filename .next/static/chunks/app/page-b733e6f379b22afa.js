(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2358:function(e,s,t){Promise.resolve().then(t.bind(t,5974))},5974:function(e,s,t){"use strict";t.r(s);var a=t(7437),n=t(2265),l=t(4115),r=t(7730),i=t(1840),o=t(1023),c=t(4862),d=t(2374),m=t(4605),u=t(7171),x=t(8915),p=t(5790),h=t(6363);s.default=()=>{let[e,s]=(0,n.useState)("support"),[t,g]=(0,n.useState)([{role:"assistant",content:"السلام علیکم / आदाब / Hello! I am here to provide you with confidential support and information about Technology-Facilitated Gender-Based Violence (TFGBV). You can ask me about:\n\n• What is TFGBV?\n• How to stay safe online\n• Where to report abuse\n• Your legal rights\n• Support services available\n\nHow can I help you today?",timestamp:new Date}]),[y,b]=(0,n.useState)(null),[f,j]=(0,n.useState)(""),[N,v]=(0,n.useState)(!1),[w,T]=(0,n.useState)("en"),[S,k]=(0,n.useState)(!1),z=(0,n.useRef)(null),[C,Z]=(0,n.useState)(!1),A=(0,n.useRef)(null);(0,n.useEffect)(()=>{Z(!0)},[]);let scrollToBottom=()=>{var e;null===(e=z.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,n.useEffect)(()=>{scrollToBottom()},[t]);let handleModeChange=e=>{s(e),g([]),b(null),j(""),"support"===e?g([{role:"assistant",content:"You are now in Support Chat mode. I am here to provide confidential support and information about TFGBV. How can I help?",timestamp:new Date}]):g([{role:"assistant",content:"You are now in Content Analyzer mode. Please enter a headline, paste your text, or upload a Word document for review based on Uks's feminist and media-sensitive guidelines.",timestamp:new Date}])},F={en:[{text:"What is TFGBV?",icon:l.Z},{text:"How to stay safe online",icon:r.Z},{text:"Where to report abuse",icon:i.Z},{text:"My legal rights",icon:o.Z}],ur:[{text:"TFGBV کیا ہے؟",icon:l.Z},{text:"آن لائن محفوظ کیسے رہیں",icon:r.Z},{text:"بدسلوکی کی رپورٹ کہاں کریں",icon:i.Z},{text:"میرے قانونی حقوق",icon:o.Z}],sd:[{text:"TFGBV ڇا آهي؟",icon:l.Z},{text:"آن لائن محفوظ ڪيئن رهجو",icon:r.Z},{text:"بدسلوڪي جي رپورٽ ڪٿي ڪجو",icon:i.Z},{text:"منهنجا قانوني حق",icon:o.Z}]},handleSendMessage=async()=>{if(!f.trim()||N)return;b(null);let s={role:"user",content:f,timestamp:new Date};g(e=>[...e,s]),j(""),v(!0);try{let a=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[...t,s],language:w,mode:e})});if(!a.ok)throw Error("API response was not ok.");let n=await a.json();"analyzer"===e&&n.analysis?(b(n),g(e=>[...e,{role:"assistant",content:"Here is the analysis of your text. See the results displayed below the chat.",timestamp:new Date}])):g(e=>[...e,{role:"assistant",content:n.message,timestamp:new Date}])}catch(e){console.error("Failed to send message:",e),g(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error. Please check your connection or API quota and try again.",timestamp:new Date}])}v(!1)},handleQuickAction=e=>{j(e)},getTranslation=e=>{let s={en:{title:"TFGBV Support Chatbot",subtitle:"Confidential Support & Information",emergency:"Emergency Contacts",quickActions:"Quick Actions",typeMessage:"Type your message...",language:"Language",disclaimer:"This chatbot provides information only. For immediate danger, please call emergency services.",confidential:"Your conversation is private and confidential",analyzerTitle:"Content Analyzer",analyzerSubtitle:"Review content based on Uks's guidelines",typePrompt:"Enter a headline or paste text..."},ur:{title:"TFGBV سپورٹ چیٹ بوٹ",subtitle:"خفیہ معاونت اور معلومات",emergency:"ہنگامی رابطے",quickActions:"فوری اقدامات",typeMessage:"اپنا پیغام لکھیں...",language:"زبان",disclaimer:"یہ چیٹ بوٹ صرف معلومات فراہم کرتا ہے۔ فوری خطرے کی صورت میں، براہ کرم ہنگامی خدمات کو کال کریں۔",confidential:"آپ کی گفتگو نجی اور خفیہ ہے",analyzerTitle:"مواد کا تجزیہ کار",analyzerSubtitle:"یوکس کے رہنما اصولوں پر مبنی مواد کا جائزہ لیں",typePrompt:"ایک سرخی درج کریں یا متن چسپاں کریں..."},sd:{title:"TFGBV سپورٽ چيٽ بوٽ",subtitle:"رازداري سپورٽ ۽ معلومات",emergency:"ايمرجنسي رابطا",quickActions:"تڪڙا قدم",typeMessage:"پنهنجو پيغام لکو...",language:"ٻولي",disclaimer:"هي چيٽ بوٽ صرف معلومات فراهم ڪري ٿو. فوري خطري جي صورت ۾، مهرباني ڪري ايمرجنسي سروسز کي ڪال ڪريو.",confidential:"توهان جي ڳالهه ٻولهه خانگي ۽ رازداري آهي",analyzerTitle:"مواد جو تجزيو ڪندڙ",analyzerSubtitle:"Uks جي ھدايتن جي بنياد تي مواد جو جائزو وٺو",typePrompt:"ھڪڙي عنوان داخل ڪريو يا ٽيڪسٽ پيسٽ ڪريو..."}};return s[w][e]||s.en[e]};return(0,a.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50",children:[(0,a.jsx)("div",{className:"".concat(S?"translate-x-0":"-translate-x-full"," md:translate-x-0 fixed md:relative w-80 bg-white shadow-xl transition-transform duration-300 ease-in-out z-20 h-full overflow-y-auto"),children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r.Z,{className:"text-purple-600",size:28}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Resources"})]}),(0,a.jsx)("button",{onClick:()=>k(!1),className:"md:hidden",children:(0,a.jsx)(c.Z,{size:24})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(d.Z,{className:"inline mr-2",size:16}),getTranslation("language")]}),(0,a.jsxs)("select",{value:w,onChange:e=>T(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"en",children:"English"}),(0,a.jsx)("option",{value:"ur",children:"اردو (Urdu)"}),(0,a.jsx)("option",{value:"sd",children:"سنڌي (Sindhi)"})]})]}),"support"===e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,a.jsx)(i.Z,{className:"mr-2 text-red-600",size:20}),getTranslation("emergency")]}),(0,a.jsx)("div",{className:"space-y-2",children:({en:[{name:"National Emergency Helpline",number:"1099"},{name:"Rozan Helpline",number:"0800-22-227"},{name:"Madadgar Helpline",number:"1098"},{name:"Women Development Helpline",number:"1043"}],ur:[{name:"قومی ہنگامی ہیلپ لائن",number:"1099"},{name:"روزن ہیلپ لائن",number:"0800-22-227"},{name:"مددگار ہیلپ لائن",number:"1098"},{name:"خواتین کی ترقی ہیلپ لائن",number:"1043"}],sd:[{name:"قومي ايمرجنسي هيلپ لائين",number:"1099"},{name:"روزن هيلپ لائين",number:"0800-22-227"},{name:"مددگار هيلپ لائين",number:"1098"},{name:"عورتن جي ترقي هيلپ لائين",number:"1043"}]})[w].map((e,s)=>(0,a.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800",children:e.name}),(0,a.jsx)("p",{className:"text-lg font-bold text-red-600",children:e.number})]},s))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:getTranslation("quickActions")}),(0,a.jsx)("div",{className:"space-y-2",children:F[w].map((e,s)=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>handleQuickAction(e.text),className:"w-full text-left px-4 py-3 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors flex items-center space-x-3",children:[(0,a.jsx)(t,{size:18,className:"text-purple-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e.text})]},s)})})]})]}):(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"About Content Analyzer"}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["This tool helps journalists and content creators by:",(0,a.jsx)("br",{}),"• Generating content from headlines.",(0,a.jsx)("br",{}),"• Revising text based on feminist and gender-sensitive principles.",(0,a.jsx)("br",{}),"• Highlighting grammatical and stylistic issues."]})]}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-6",children:(0,a.jsx)("p",{className:"text-xs text-gray-600",children:getTranslation("disclaimer")})})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)("div",{className:"bg-white shadow-md px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("button",{onClick:()=>k(!0),className:"md:hidden",children:(0,a.jsx)(m.Z,{size:24})}),"support"===e?(0,a.jsx)(o.Z,{className:"text-purple-600",size:32}):(0,a.jsx)(u.Z,{className:"text-blue-600",size:32}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:getTranslation("support"===e?"title":"analyzerTitle")}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:getTranslation("support"===e?"subtitle":"analyzerSubtitle")})]})]}),(0,a.jsxs)("div",{className:"flex items-center p-1 bg-gray-200 rounded-lg",children:[(0,a.jsx)("button",{onClick:()=>handleModeChange("support"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat("support"===e?"bg-purple-600 text-white":"text-gray-600"),children:"Support"}),(0,a.jsx)("button",{onClick:()=>handleModeChange("analyzer"),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat("analyzer"===e?"bg-blue-600 text-white":"text-gray-600"),children:"Analyzer"})]})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[t.map((e,s)=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-2xl px-4 py-3 rounded-lg shadow-md ".concat("user"===e.role?"bg-purple-600 text-white":"bg-white text-gray-800"),children:[(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}),C&&(0,a.jsx)("p",{className:"text-xs mt-2 opacity-70",children:e.timestamp.toLocaleTimeString()})]})},s)),N&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-white shadow-md px-4 py-3 rounded-lg",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})}),y&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Analysis Complete"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-blue-600 mb-2",children:"Revised Content"}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-md whitespace-pre-wrap text-gray-700",children:y.revisedText})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-blue-600 mb-2",children:"Issues and Suggestions"}),y.analysis.length>0?(0,a.jsx)("div",{className:"space-y-4",children:y.analysis.map((e,s)=>(0,a.jsxs)("div",{className:"border-l-4 p-4 rounded-r-lg",style:{borderColor:"Tone"===e.issueType?"#FBBF24":"Gender-Sensitivity"===e.issueType?"#F472B6":"#60A5FA"},children:[(0,a.jsxs)("p",{className:"font-semibold text-gray-800",children:["Original Snippet: ",(0,a.jsxs)("span",{className:"font-normal italic text-red-600",children:['"',e.originalSnippet,'"']})]}),(0,a.jsxs)("p",{className:"text-sm mt-2",children:[(0,a.jsx)("strong",{className:"text-gray-700",children:"Issue Type:"})," ",e.issueType]}),(0,a.jsxs)("p",{className:"text-sm mt-1",children:[(0,a.jsx)("strong",{className:"text-gray-700",children:"Explanation:"})," ",e.explanation]}),(0,a.jsxs)("p",{className:"text-sm mt-1",children:[(0,a.jsx)("strong",{className:"text-gray-700",children:"Suggestion:"})," ",e.suggestion]})]},s))}):(0,a.jsx)("p",{className:"text-gray-600",children:"No specific issues found. The text aligns well with the guidelines."})]})]})]}),(0,a.jsx)("div",{ref:z})]}),(0,a.jsx)("div",{className:"bg-white border-t px-6 py-4",children:(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("input",{type:"text",value:f,onChange:e=>j(e.target.value),onKeyPress:e=>"Enter"===e.key&&handleSendMessage(),placeholder:getTranslation("support"===e?"typeMessage":"typePrompt"),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:N}),"analyzer"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",ref:A,onChange:e=>{let s=e.target.files[0];if(s&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===s.type){let e=new FileReader;e.onload=e=>{let t=e.target.result;h.extractRawText({arrayBuffer:t}).then(e=>{j(e.value),g(e=>[...e,{role:"assistant",content:'Document "'.concat(s.name,"\" uploaded successfully. Press 'Send' to analyze."),timestamp:new Date}])}).catch(e=>{console.error("Error reading docx file:",e),g(e=>[...e,{role:"assistant",content:"Sorry, there was an error reading the document.",timestamp:new Date}])})},e.readAsArrayBuffer(s)}else g(e=>[...e,{role:"assistant",content:"Please upload a valid Word document (.docx).",timestamp:new Date}]);e.target.value=null},accept:".docx",style:{display:"none"}}),(0,a.jsxs)("button",{onClick:()=>A.current.click(),disabled:N,className:"px-4 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:bg-gray-100 transition-colors flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{size:20}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Upload"})]})]}),(0,a.jsxs)("button",{onClick:handleSendMessage,disabled:N||!f.trim(),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{size:20}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Send"})]})]})})]})]})}}},function(e){e.O(0,[512,971,472,744],function(){return e(e.s=2358)}),_N_E=e.O()}]);